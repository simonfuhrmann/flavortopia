<link rel="import" href="/bower_components/polymer/polymer-element.html">
<link rel="import" href="/bower_components/iron-flex-layout/iron-flex-layout-classes.html">

<link rel="import" href="/src/theme/diy-theme.html">
<link rel="import" href="/src/diy-vendor-popup.html">
<link rel="import" href="/src/diy-flavor-action.html">
<link rel="import" href="/src/diy-flavor-actions.html">

<dom-module id="diy-flavor-list">
  <link rel="import" type="css" href="diy-flavor-list.css">
  <template>
    <style include="iron-flex iron-flex-alignment"></style>
    <style include="diy-theme"></style>

    <div id="title" class="layout horizontal end">
      <h2 class="flex layout horizontal center">
        <span>[[title]]</span>
        <iron-icon
            icon="icons:info"
            hidden="[[!vendorKey]]"
            on-tap="onVendorTap_">
        </iron-icon>
      </h2>
      <span id="numFlavorsInfo">[[numFlavorsText]]</span>
      <a id="showAllButton" hidden on-tap="onShowAll_">Show All</a>
      <a id="collapseButton" hidden on-tap="onCollapse_">Collapse</a>
    </div>

    <!-- Card that shows when no flavors are displayed. -->
    <paper-card id="emptyCard" hidden>
      [[emptyMessage]]
    </paper-card>

    <paper-card id="flavorCard">
      <!-- 2-column table with flavors. -->
      <div class="two-column">
        <table>
          <template is="dom-repeat" items="[[showFlavors]]" as="flavor">
            <tr>
              <td class="vendor-short">
                [<span>[[vendorFromKey_(flavor.vendor)]]</span>]
              </td>
              <td>[[flavor.name]]</td>
              <td class="flavor-action">
                <diy-flavor-action
                    flavor="[[flavor.key]]"
                    on-tap="onActionTap_">
                </diy-flavor-action>
              </td>
            </tr>
          </template>
        </table>
      </div>

      <!-- Notice that some flavors are hidden. -->
      <div id="flavorsHiddenNotice" hidden>
        <a on-tap="onShowAll_">Show [[numHidden]] hidden flavors</a>
      </div>
    </paper-card>

    <!-- Popup when vendor information is requested. -->
    <diy-vendor-popup id="vendorPopup"></diy-vendor-popup>

    <!-- Dropdown for flavor actions (inventory, whishlist). -->
    <diy-flavor-actions id="flavorActions"></diy-flavor-actions>

  </template>
  <script type="text/javascript" src="diy-flavor-list.js"></script>
</dom-module>
