<link rel="import" href="/bower_components/polymer/polymer-element.html">
<link rel="import" href="/bower_components/paper-button/paper-button.html">
<link rel="import" href="/bower_components/paper-card/paper-card.html">
<link rel="import" href="/bower_components/paper-spinner/paper-spinner-lite.html">
<link rel="import" href="/bower_components/paper-dialog/paper-dialog.html">
<link rel="import" href="/bower_components/iron-flex-layout/iron-flex-layout-classes.html">

<link rel="import" href="/src/common/diy-dialog.html">
<link rel="import" href="/src/common/diy-input.html">
<link rel="import" href="/src/functional/diy-firebase-auth.html">
<link rel="import" href="/src/mixins/mixin-redux.html">
<link rel="import" href="/src/mixins/mixin-router.html">
<link rel="import" href="/src/theme/diy-theme.html">

<dom-module id="diy-user-signin">
  <link rel="import" type="css" href="diy-user-signin.css">
  <template>
    <style include="iron-flex iron-flex-alignment"></style>
    <style include="diy-theme"></style>

    <diy-firebase-auth id="firebaseAuth"></diy-firebase-auth>

    <paper-card class="bottom-margin">
      <h2>Third Party Sign-In</h2>
      <div class="layout horizontal wrap center-justified">

        <paper-button raised class="auth-provider" on-tap="signinGoogle_">
          <img src="images/auth_service_google.svg">
          <span>Sign-in with</span>
          <span>Google</span>
        </paper-button>

        <paper-button raised class="auth-provider" on-tap="signinGithub_">
          <img src="images/auth_service_github.svg">
          <span>Sign-in with</span>
          <span>GitHub</span>
        </paper-button>

        <paper-button disabled class="auth-provider" on-tap="signinFacebook_">
          <img src="images/auth_service_facebook.svg">
          <span>Not yet</span>
          <span>available</span>
        </paper-button>

        <paper-button disabled class="auth-provider" on-tap="signinTwitter_">
          <img src="images/auth_service_twitter.svg">
          <span>Not yet</span>
          <span>available</span>
        </paper-button>

      </div>
    </paper-card>

    <div class="signin-container layout horizontal wrap">
      <paper-card class="flex signin-card">
        <div class="layout vertical">
          <h2>E-Mail Sign-In</h2>
          <diy-input
              id="signinEmailInput"
              always-float-label
              label="E-Mail">
          </diy-input>
          <diy-input
              id="signinPasswordInput"
              always-float-label
              label="Password"
              type="password">
          </diy-input>

          <div class="flex"></div>
          <div class="layout horizontal">
            <paper-button on-tap="resetPasswordTap_">
              Reset Password
            </paper-button>
            <div class="flex"></div>
            <paper-button id="signinButton" on-tap="userSigninTap_">
              Sign in
            </paper-button>
          </div>
        </div>
      </paper-card>

      <paper-card class="flex signin-card">
        <div class="layout vertical">
          <h2>Email Sign-up</h2>
          <diy-input
              id="signupEmailInput"
              always-float-label
              label="E-Mail">
          </diy-input>
          <diy-input
              id="signupPasswordInput"
              always-float-label
              label="Password"
              type="password">
          </diy-input>
          <diy-input
              id="signupPasswordRepeatInput"
              always-float-label
              label="Password (repeat)"
              type="password">
          </diy-input>
          <div class="layout horizontal end-justified">
            <paper-button id="signupButton" on-tap="userSignupTap_">
              Sign up
            </paper-button>
          </div>
        </div>
      </paper-card>
    </div>

    <paper-dialog id="waitingForTokenDialog" modal>
      <div class="layout horizontal center">
        <paper-spinner-lite active></paper-spinner-lite>
        <span>Waiting for authentication...</span>
      </div>
    </paper-dialog>

    <!-- Generic error dialog. -->
    <diy-dialog id="errorDialog"></diy-dialog>

  </template>
  <script type="text/javascript" src="diy-user-signin.js"></script>
</dom-module>
